<!DOCTYPE html>
<html lang="sk">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Quiz Results - Final Leaderboard</title>
	<link rel="stylesheet" href="/shared/common.css">
	<style>
		html,
		body {
			margin: 0;
			height: 100%;
			width: 100%;
			font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
			background: linear-gradient(135deg, var(--primary-purple) 0%, #4a1a5c 50%, #2d0a36 100%);
			color: white;
			overflow: hidden;
		}

		.stage-container {
			height: 100vh;
			display: flex;
			flex-direction: column;
			padding: 1.5rem;
			animation: fadeIn 0.8s ease-out;
			position: relative;
			overflow: hidden;
		}

		.stage-container::before {
			content: '';
			position: fixed;
			top: -50%;
			left: -50%;
			width: 200%;
			height: 200%;
			background: radial-gradient(circle, transparent 20%, rgba(255, 215, 0, 0.02) 40%, transparent 70%);
			animation: rotate 20s linear infinite;
			pointer-events: none;
			z-index: -1;
		}

		@keyframes rotate {
			from {
				transform: rotate(0deg);
			}
			to {
				transform: rotate(360deg);
			}
		}

		.stage-header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 1rem;
			padding-bottom: 0.5rem;
			min-height: 80px;
		}

		.stage-pin-display {
			display: flex;
			flex-direction: column;
			align-items: flex-start;
		}

		.stage-pin-code {
			font-size: 2.2rem;
			font-weight: bold;
			color: var(--primary-purple);
			background: white;
			padding: 0.75rem 1.5rem;
			border-radius: 0.75rem;
			letter-spacing: 0.15rem;
			border: 3px solid white;
			min-width: 150px;
			text-align: center;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
			transition: all 0.3s ease;
		}

		.game-info {
			display: flex;
			flex-direction: column;
			align-items: flex-end;
			gap: 0.5rem;
		}

		.info-item {
			font-size: 1.1rem;
			color: white;
			background: rgba(255, 255, 255, 0.25);
			padding: 0.75rem 1.25rem;
			border-radius: 1.25rem;
			white-space: nowrap;
			font-weight: bold;
			backdrop-filter: blur(10px);
			transition: all 0.3s ease;
		}

		.stage-content {
			flex: 1;
			display: flex;
			flex-direction: column;
			gap: 2rem;
		}

		.results-section {
			background: rgba(255, 255, 255, 0.12);
			border-radius: 1.5rem;
			padding: 2rem 1.5rem;
			flex: 1;
			display: flex;
			flex-direction: column;
			justify-content: center;
			backdrop-filter: blur(15px);
			border: 1px solid rgba(255, 255, 255, 0.2);
			box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
		}

		.section-title {
			font-size: 3.5rem;
			font-weight: 900;
			margin-bottom: 2.5rem;
			text-align: center;
			color: #ffffff;
			text-shadow: 0 3px 15px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 255, 255, 0.2);
			animation: slideDown 0.6s ease-out 0.2s both;
			letter-spacing: 0.05em;
		}

		.top3-leaderboard {
			display: flex;
			flex-direction: column;
			gap: 1.5rem;
			margin-bottom: 2.5rem;
		}

		.player-position-message {
			text-align: center;
			font-size: 1.8rem;
			font-weight: 800;
			color: #ffffff;
			background: rgba(255, 255, 255, 0.25);
			padding: 2rem;
			border-radius: 1rem;
			margin-top: 2rem;
			backdrop-filter: blur(15px);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
			transition: all 0.3s ease;
			animation: fadeInUp 0.6s ease-out 0.4s both;
			border: 2px solid rgba(255, 255, 255, 0.3);
			text-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);
		}

		.top3-item {
			display: flex;
			align-items: center;
			justify-content: space-between;
			padding: 2.5rem 3rem;
			background: #ffffff;
			border-radius: 1.5rem;
			font-size: 1.8rem;
			min-height: 120px;
			box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
			transition: all 0.4s ease;
			transform: translateY(0);
			animation: slideUp 0.6s ease-out forwards;
			opacity: 0;
			border: 3px solid rgba(138, 43, 226, 0.15);
		}

		/* Default (non-medal) items get high contrast */
		.top3-item:not(.first):not(.second):not(.third) .top3-player-name {
			color: #2d1b69 !important;
			text-shadow: none;
		}

		.top3-item:not(.first):not(.second):not(.third) .top3-player-score {
			color: #2d1b69 !important;
			background: rgba(45, 27, 105, 0.1);
			text-shadow: none;
		}

		.top3-item.first {
			background: linear-gradient(135deg, #ffd700, #ffed4e);
			color: #1a1a1a;
			font-weight: 900;
			border: 5px solid #ffd700;
			box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
			transform: scale(1.08);
			animation: bounceIn 0.8s ease-out 0.1s both, glow 2s ease-in-out infinite alternate;
			min-height: 140px;
			position: relative;
			overflow: visible;
		}

		.top3-item.first::before {
			content: 'üëë';
			position: absolute;
			top: -25px;
			left: 50%;
			transform: translateX(-50%);
			font-size: 2rem;
			animation: crown 2s ease-in-out infinite;
			z-index: 10;
		}

		.top3-item.first::after {
			content: '';
			position: absolute;
			top: -10px;
			left: -10px;
			right: -10px;
			bottom: -10px;
			background: linear-gradient(45deg, transparent, rgba(255, 215, 0, 0.3), transparent);
			border-radius: 1.5rem;
			z-index: -1;
			animation: gradientShift 3s ease-in-out infinite;
		}

		/* Floating particles around winner */
		.top3-item.first .particle {
			position: absolute;
			font-size: 1rem;
			animation: float 3s ease-in-out infinite;
			pointer-events: none;
		}

		.top3-item.first .particle:nth-child(1) {
			content: '‚≠ê';
			top: 10%;
			left: -20px;
			animation-delay: 0s;
		}

		.top3-item.first .particle:nth-child(2) {
			content: 'üéâ';
			top: 60%;
			right: -25px;
			animation-delay: 1s;
		}

		.top3-item.first .particle:nth-child(3) {
			content: '‚ú®';
			top: 30%;
			left: -15px;
			animation-delay: 2s;
		}

		.top3-item.second {
			background: linear-gradient(135deg, #c0c0c0, #e6e6e6);
			color: #1a1a1a;
			font-weight: 800;
			box-shadow: 0 8px 25px rgba(192, 192, 192, 0.4);
			animation: slideUp 0.6s ease-out 0.2s both;
			border: 4px solid #c0c0c0;
		}

		.top3-item.third {
			background: linear-gradient(135deg, #cd7f32, #deb887);
			color: #1a1a1a;
			font-weight: 800;
			box-shadow: 0 8px 25px rgba(205, 127, 50, 0.4);
			animation: slideUp 0.6s ease-out 0.3s both;
			border: 4px solid #cd7f32;
		}

		.top3-player-name {
			font-weight: 900;
			font-size: 2.2rem;
			color: #1a1a1a;
			flex: 1;
			display: flex;
			align-items: center;
			gap: 1rem;
			text-shadow: 0 1px 3px rgba(255, 255, 255, 0.3);
			letter-spacing: 0.02em;
		}

		.top3-player-score {
			font-weight: 900;
			color: #1a1a1a;
			font-size: 2.4rem;
			margin-left: 1rem;
			padding: 0.5rem 1.25rem;
			background: rgba(26, 26, 26, 0.15);
			border-radius: 0.75rem;
			text-shadow: 0 1px 3px rgba(255, 255, 255, 0.3);
			letter-spacing: 0.05em;
			min-width: 120px;
			text-align: center;
			position: relative;
			animation: countUp 0.8s ease-out;
		}

		.top3-player-score.animated {
			animation: countUp 0.8s ease-out;
		}

		.stage-footer {
			display: flex;
			justify-content: center;
			gap: 2rem;
			margin-top: 2rem;
		}

		.action-button {
			padding: 1.25rem 2.5rem;
			font-size: 1.3rem;
			border: none;
			border-radius: 0.75rem;
			cursor: pointer;
			transition: all 0.3s ease;
			font-weight: bold;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
		}

		.primary-button {
			background: var(--primary-color);
			color: white;
		}

		.primary-button:hover {
			background: var(--primary-hover);
		}

		.secondary-button {
			background: rgba(255, 255, 255, 0.2);
			color: white;
		}

		.secondary-button:hover {
			background: rgba(255, 255, 255, 0.3);
			transform: translateY(-2px);
			box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
		}

		.empty-state {
			text-align: center;
			padding: 4rem;
			color: rgba(255, 255, 255, 0.8);
			animation: fadeIn 0.6s ease-out;
		}

		.empty-state-icon {
			font-size: 5rem;
			margin-bottom: 1.5rem;
			animation: bounce 2s ease-in-out infinite;
		}

		/* Animations */
		@keyframes fadeIn {
			from {
				opacity: 0;
			}
			to {
				opacity: 1;
			}
		}

		@keyframes slideDown {
			from {
				opacity: 0;
				transform: translateY(-30px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes slideUp {
			from {
				opacity: 0;
				transform: translateY(30px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes fadeInUp {
			from {
				opacity: 0;
				transform: translateY(20px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}

		@keyframes bounceIn {
			0% {
				opacity: 0;
				transform: scale(0.3) translateY(30px);
			}
			50% {
				opacity: 1;
				transform: scale(1.1) translateY(-10px);
			}
			100% {
				opacity: 1;
				transform: scale(1.05) translateY(0);
			}
		}

		@keyframes glow {
			from {
				box-shadow: 0 10px 30px rgba(255, 215, 0, 0.5);
			}
			to {
				box-shadow: 0 10px 30px rgba(255, 215, 0, 0.8), 0 0 40px rgba(255, 215, 0, 0.5), 0 0 60px rgba(255, 215, 0, 0.2);
			}
		}

		@keyframes bounce {
			0%, 20%, 50%, 80%, 100% {
				transform: translateY(0);
			}
			40% {
				transform: translateY(-10px);
			}
			60% {
				transform: translateY(-5px);
			}
		}

		/* Fancy floating particles */
		@keyframes float {
			0%, 100% {
				transform: translateY(0px) rotate(0deg);
				opacity: 1;
			}
			50% {
				transform: translateY(-20px) rotate(180deg);
				opacity: 0.8;
			}
		}

		@keyframes sparkle {
			0%, 100% {
				opacity: 1;
				transform: scale(1);
			}
			50% {
				opacity: 0.3;
				transform: scale(0.8);
			}
		}

		/* Gradient text animation */
		@keyframes gradientShift {
			0% {
				background-position: 0% 50%;
			}
			50% {
				background-position: 100% 50%;
			}
			100% {
				background-position: 0% 50%;
			}
		}

		/* Number counting effect */
		@keyframes countUp {
			from {
				transform: scale(1.2);
				opacity: 0.7;
			}
			to {
				transform: scale(1);
				opacity: 1;
			}
		}

		/* Winner crown effect */
		@keyframes crown {
			0%, 100% {
				transform: translateY(0px) rotate(-5deg);
			}
			50% {
				transform: translateY(-3px) rotate(5deg);
			}
		}

		/* Responsive adjustments */
		@media (max-width: 768px) {
			.stage-container {
				padding: 0.5rem;
			}

			.stage-header {
				flex-direction: column;
				gap: 0.5rem;
				text-align: center;
				min-height: auto;
			}

			.stage-pin-code {
				font-size: 1.8rem;
				min-width: 120px;
				padding: 0.6rem 1.2rem;
			}

			.info-item {
				font-size: 0.9rem;
			}

			.section-title {
				font-size: 2.8rem;
				margin-bottom: 2rem;
			}

			.top3-item {
				padding: 1.75rem 2rem;
				font-size: 1.4rem;
				min-height: 90px;
			}

			.top3-player-name {
				font-size: 1.6rem;
			}

			.top3-player-score {
				font-size: 1.8rem;
				min-width: 100px;
			}

			.player-position-message {
				font-size: 1.4rem;
				padding: 1.5rem;
			}

			.stage-footer {
				flex-direction: column;
				align-items: center;
				gap: 1rem;
			}
		}
	</style>
</head>

<body>
	<div class="stage-container">
		<div class="stage-header">
			<div class="stage-pin-display">
				<span class="stage-pin-code" id="gamePin">#------</span>
			</div>
			<div class="game-info">
				<!-- Game info removed - not needed for final results -->
			</div>
		</div>

		<div class="stage-content">
			<div class="results-section">
				<h2 class="section-title">üèÜ TOP 3</h2>
				
				<div id="top3Leaderboard" class="top3-leaderboard">
					<!-- TOP 3 items will be populated here -->
				</div>
				
				<div id="playerPositionMessage" class="player-position-message" style="display: none;">
					<!-- Player position message will be shown here -->
				</div>

				<div id="emptyState" class="empty-state" style="display: none;">
					<div class="empty-state-icon">üéÆ</div>
					<h3>≈Ωiadne v√Ωsledky</h3>
					<p>Hra sa e≈°te neskonƒçila alebo sa nez√∫ƒçastnili ≈æiadni hr√°ƒçi.</p>
				</div>
			</div>
		</div>

		<div class="stage-footer">
			<button id="backToJoinBtn" class="action-button secondary-button">
				üè† Sp√§≈• na √∫vod
			</button>
		</div>
	</div>

	<!-- Message container for notifications -->
	<div id="messageBox"></div>

	<script src="/socket.io/socket.io.js"></script>
	<script type="module" src="/shared/connectionStatus.js"></script>
	<script type="module" src="/stage/stage.js"></script>
</body>

</html>